# 整骨院管理SaaS UI/UXデザイン要件定義書

## プロジェクト概要

**プロジェクト名**: 整骨院管理SaaS  
**対象**: 46店舗展開の整骨院グループ向けリアルタイム経営分析システム  
**目標**: Atlassian Design Systemの原則に基づいたエンタープライズレベルの医療管理システムUI/UX

---

## 🚀 プロジェクト進捗状況

**全体進捗**: Phase 1 完了 ✅ | Phase 2 準備中 ⏳ | Phase 3 準備中 ⏳  
**完了率**: 35% (Phase 1: 100% | Phase 2: 0% | Phase 3: 0%)  
**最終更新**: 2024-11-07 | **ステータス**: Phase 1 完了・Phase 2 開始可能  

## 現在のデザイン状況分析

### 既存UI構造
- **フレームワーク**: Next.js 15 + React 19 + TypeScript
- **スタイリング**: Tailwind CSS + shadcn/ui ベースコンポーネント
- **レイアウト**: レスポンシブ対応（デスクトップ・タブレット・モバイル）
- **アクセシビリティ**: WCAG 2.2準拠（部分実装済み）

### 現在のコンポーネント構造
```
src/components/
├── ui/ - 基本UIコンポーネント (shadcn/ui準拠)
│   ├── button.tsx - 医療系バリアント対応
│   ├── card.tsx - 医療・ダッシュボード専用バリアント
│   └── [その他20+基本コンポーネント]
├── navigation/ - ナビゲーション系
│   ├── sidebar.tsx - 折りたたみ式・階層メニュー
│   ├── mobile-bottom-nav.tsx - モバイル専用ボトムナビ
│   └── header.tsx
├── admin/ - 管理者専用コンポーネント
├── dashboard/ - ダッシュボード関連
├── session/ - セッション管理・セキュリティ
└── [機能別ディレクトリ]
```

### 現在のデザイントークン
```scss
// カラーパレット
primary: #1e3a8a (医療ブルー)
medical-blue: #3B82F6 系列
medical-green: #10B981 系列
admin: #9333ea (管理者専用パープル)

// スペーシング (WCAG 2.2対応)
touch-min: 24px (最小タッチターゲット)
touch-comfortable: 44px
medical-spacing: 4px, 8px, 12px, 16px, 20px

// 影・角丸
rounded-medical: 8px
shadow-medical: 控えめな医療系シャドウ
```

## Atlassian Design System準拠要件

### 1. デザイン原則の適用

#### **一貫性 (Consistency)** ✅ **完了**
- **現状**: ~~部分的に実装済み（shadcn/ui準拠）~~ → **統一済み**
- **改善要件**: 
  - ✅ 全コンポーネントの統一的なバリアント体系構築
  - ✅ アイコン使用ルールの標準化 (lucide-react準拠 + Medical Icon System)
  - ✅ インタラクション・アニメーションパターンの統一 (Atlassian Motion準拠)

#### **再利用性 (Reusable Building Blocks)** ✅ **完了**
- **現状**: ~~基本UIコンポーネントは再利用可能~~ → **医療特化型完備**
- **改善要件**:
  - ✅ 複合コンポーネントのパターン化 (Page header, Modal dialog, Medical Banner等)
  - ✅ プリセット設定の拡充 (医療・管理者・患者向けテーマ)
  - ⏳ レイアウトコンポーネントの体系化 (Phase 2で実装予定)

#### **直感性 (Intuitive Experiences)** ✅ **部分完了**
- **現状**: ~~基本的なUXパターン実装済み~~ → **医療特化UX強化済み**
- **改善要件**:
  - ✅ 医療従事者向けワークフロー最適化 (緊急度分類・優先度表示)
  - ✅ 認知負荷軽減のための情報階層設計 (Page Header統一)
  - ✅ エラー状態・ローディング状態の一貫した表現 (Alert/Banner強化)

### 2. コンポーネントカテゴリ別要件

#### **Forms and Inputs** ✅ **完了**
```tsx
優先度: 高 | ステータス: 完了 ✅
現状: button, input, select, textarea実装済み → 医療特化型バリアント完備
改善要件:
✅ 医療データ入力専用フィールド (medical, patient, clinical, emergency バリアント)
✅ バリデーション表示の統一 (error, success, warning 状態管理)
⏳ 複数ステップフォームパターン (Phase 2で実装予定)
⏳ 音声入力対応検討 (Phase 3で検討)

実装完了:
- Button: 14種類のバリアント (医療・管理・患者・緊急対応)
- Input: 8種類のバリアント + 状態管理 + WCAG 2.2準拠
- 医療特化サイズ (clinical, emergency, touch対応)
```

#### **Layout and Structure** ⏳ **Phase 2実装予定**
```tsx
優先度: 高 | ステータス: 部分完了 (33%)
現状: sidebar, header, mobile-nav実装済み
改善要件:
✅ Page headerコンポーネントの標準化 (完了)
⏳ Layout gridシステムの医療業務最適化 (Phase 2)
⏳ マルチ店舗切り替えUIパターン (Phase 2)
⏳ 管理者・一般ユーザー権限別レイアウト (Phase 2)

実装完了:
- PageHeader: ブレッドクラム・アクション・ステータス表示統合
```

#### **Loading States** ⏳ **Phase 3実装予定**
```tsx
優先度: 中 | ステータス: 未着手
現状: 基本的なローディング実装
改善要件:
⏳ Skeletonコンポーネントのパターン化 (Phase 3)
⏳ 医療データ処理用Progress bar (Phase 3)
⏳ リアルタイム同期状態表示 (Phase 3)
⏳ Spinnerの統一デザイン (Phase 3)
```

#### **Messaging** ✅ **完了**
```tsx
優先度: 高 | ステータス: 完了 ✅
現状: alert-dialog, alert実装済み → 医療特化メッセージング完備
改善要件:
✅ 医療アラート専用Banner (Medical Banner実装済み)
✅ 緊急度別Modal dialog (Alert 14種類バリアント)
✅ セキュリティ通知用Inline message (security-warning, security-critical)
⏳ オンボーディング用Spotlight (Phase 3で実装予定)

実装完了:
- Alert: 14種類の医療・セキュリティ特化バリアント
- MedicalBanner: 緊急度分類・音声通知・患者ID対応
- 自動非表示・アクセシビリティ完全対応
```

#### **Images and Icons** ✅ **完了**
```tsx
優先度: 中 | ステータス: 完了 ✅
現状: avatar, lucide-react icons使用 → Medical Icon System構築済み
改善要件:
✅ 医療アイコンセットの追加 (40+アイコン・医療特化型)
⏳ ユーザーアバターシステムの拡張 (Phase 2で実装予定)
⏳ ロゴ・ブランディング要素の統一 (Phase 2で実装予定)
⏳ 店舗識別用Tileパターン (Phase 2で実装予定)

実装完了:
- MedicalIcon: 医療・セキュリティ・システム・操作アイコン体系
- 優先度・バリアント・サイズ制御完備
- 使用ガイドライン・アクセシビリティ対応
```

### 3. 医療特化要件

#### **セキュリティ・プライバシー**
```tsx
必須要件:
- 個人情報表示時の視覚的マスキング
- セッション状態の明確な表示
- 権限レベルの視覚的区別
- 監査ログ表示の専用UI
```

#### **アクセシビリティ (WCAG 2.2準拠)**
```tsx
必須要件:
- 24px以上のタッチターゲット
- 4.5:1以上のコントラスト比
- キーボード操作完全対応
- スクリーンリーダー対応
- フォーカス表示の一貫性
```

#### **医療業務最適化**
```tsx
必須要件:
- 急患対応時のクイックアクション
- 診療記録入力の効率化UI
- 保険請求関連の専用フォーム
- スタッフ間連携のコミュニケーション要素
```

### 4. レスポンシブデザイン要件

#### **ブレークポイント戦略**
```tsx
現在: mobile-sm(320px), mobile-lg(414px), tablet(768px), desktop(1024px)
改善要件:
- 各デバイスでの操作性最適化
- タブレットでの縦横表示対応
- 大画面での情報密度調整
- モバイル専用機能の拡張
```

#### **モバイルファースト強化**
```tsx
現状: MobileBottomNavigation実装済み
改善要件:
- スワイプジェスチャー対応拡張
- プルツーリフレッシュ
- オフライン対応UI
- タッチ操作の最適化
```

### 5. パフォーマンス・技術要件

#### **コンポーネントパフォーマンス**
```tsx
要件:
- Lazy loading対応
- コンポーネント分割の最適化
- メモ化戦略の統一
- バンドルサイズ最適化
```

#### **アニメーション・モーション**
```tsx
現状: 基本的なCSSアニメーション実装
改善要件:
- Atlassian Design Motion原則準拠
- 医療業務を妨げない控えめなアニメーション
- ローディング・状態変化の視覚的フィードバック
- パフォーマンス重視の実装
```

### 6. 国際化・多言語対応

#### **日本語特化**
```tsx
現状: 日本語レイアウト対応済み
改善要件:
- 縦書き・混在レイアウト対応
- 日本の医療制度特化UI
- 地域性を考慮した色彩選択
- 日本語フォント最適化 (Noto Sans JP使用中)
```

### 7. 実装優先度

#### **Phase 1 (高優先度) - 2週間** ✅ **完了**
1. **コンポーネント統一化** ✅ **100%完了**
   - ✅ Button/Card/Input系の医療バリアント拡充 (14種類バリアント実装)
   - ✅ Page headerパターンの標準化 (ブレッドクラム・アクション統合)
   - ✅ Modal/Alert系の緊急度分類 (Medical Banner + 14種類Alert)
   - ✅ Medical Icon System構築 (40+アイコン・使用ガイドライン)

#### **Phase 2 (中優先度) - 3週間** ⏳ **実装準備中**  
2. **レイアウト・ナビゲーション強化** ⏳ **0%**
   - ⏳ Sidebar機能拡張 (権限別表示・マルチ店舗対応)
   - ⏳ Mobile体験最適化 (スワイプ・プルツーリフレッシュ)
   - ⏳ レスポンシブグリッドシステム改善 (医療業務最適化)

#### **Phase 3 (低優先度) - 2週間** ⏳ **実装準備中**
3. **高度なUX要素** ⏳ **0%**
   - ⏳ アニメーション統一 (Atlassian Motion完全準拠)
   - ⏳ アクセシビリティ完全準拠 (WCAG 2.2 AA 100%達成)
   - ⏳ パフォーマンス最適化 (Lazy loading・メモ化戦略)

### 8. 成功指標 (KPI)

#### **定量指標**
- ページロード時間: 3秒以内
- モバイル操作効率: タップ数30%削減
- アクセシビリティスコア: 95%以上
- コンポーネント再利用率: 80%以上

#### **定性指標**  
- 医療従事者の学習コスト最小化
- エラー発生率の削減
- 業務効率の向上
- セキュリティ意識の向上

### 9. 技術仕様

#### **コンポーネント開発ガイドライン**
```tsx
// 標準的なコンポーネント構造
interface ComponentProps {
  variant?: 'default' | 'medical' | 'admin' | 'patient';
  size?: 'sm' | 'md' | 'lg' | 'touch';
  priority?: 'low' | 'medium' | 'high' | 'urgent';
  role?: 'staff' | 'admin' | 'patient' | 'guest';
}

// 医療特化型バリアント例
variant: {
  medical: '安全性重視・控えめな色彩',
  admin: '管理者用・紫系カラー',
  patient: '患者向け・温かみのある色調',
  urgent: '緊急時・高コントラスト'
}
```

#### **デザイントークン拡張**
```tsx
// 追加カラーパレット
medical: {
  safety: '#059669',    // 安全・正常状態
  caution: '#F59E0B',   // 注意・警告
  urgent: '#DC2626',    // 緊急・エラー
  neutral: '#6B7280'    // 中性・情報
}

// 医療特化スペーシング
spacing: {
  clinical: '0.75rem',  // 診療関連
  form: '1rem',         // フォーム関連  
  emergency: '1.25rem'  // 緊急時拡大
}
```

### 10. 品質保証

#### **デザインシステムチェックリスト**
- [x] **Phase 1完了**: Atlassian Design原則準拠 ✅
- [x] **Phase 1完了**: WCAG 2.2 AAレベル準拠 (基本コンポーネント) ✅  
- [x] **Phase 1完了**: 医療業務ワークフロー最適化 (緊急度・優先度分類) ✅
- [x] **Phase 1完了**: セキュリティ・プライバシー配慮 (ロール別表示) ✅
- [x] **Phase 1完了**: 多デバイス対応完了 (タッチターゲット24px+) ✅
- [ ] **Phase 3予定**: パフォーマンス基準達成 ⏳
- [x] **Phase 1完了**: コンポーネント再利用性確保 ✅
- [x] **Phase 1完了**: ドキュメンテーション完備 (使用例・ガイドライン) ✅

---

## 📊 Phase 1 実装サマリー

### 🎯 **達成した成果**
- **✅ 新規コンポーネント**: 3つ (PageHeader, MedicalBanner, MedicalIcon)
- **✅ 拡張コンポーネント**: 3つ (Button, Card, Input)
- **✅ バリアント総数**: 50+ (医療・管理・患者・緊急対応)
- **✅ アクセシビリティ**: WCAG 2.2準拠・24px+タッチターゲット
- **✅ デモページ**: DesignSystemShowcase実装済み

### 🚀 **次ステップ (Phase 2)**
1. Sidebar機能拡張 (権限別表示・マルチ店舗切り替え)
2. レスポンシブグリッドシステム改善
3. モバイル体験最適化 (スワイプ・プルツーリフレッシュ)

---

**作成日**: 2024-11-07  
**最終更新**: 2024-11-07 (Phase 1完了)  
**承認者**: [要指定]  
**次回レビュー**: [Phase 2完了時]  
**参考**: Atlassian Design System (https://atlassian.design/components)